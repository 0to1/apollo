"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[629],{2629:(e,n,t)=>{t.d(n,{Z:()=>U});var r=t(21902),u=t(5725),o=t(25625),c=t(57795),a=t(4022),i=t(54067),l=t(52007),s=t(93695),f=t(43975),b=t(93793),d=t(16125),m=t(36721),v=t(43472),y=t.n(v),p=["className"];function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h.apply(this,arguments)}var g=(0,r.forwardRef)((function(e,n){var t=e.className,u=function(e,n){if(null==e)return{};var t,r,u=function(e,n){if(null==e)return{};var t,r,u={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(u[t]=e[t]);return u}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(u[t]=e[t])}return u}(e,p),o=(0,m.k)("panel-root"),c=y()(o,t);return r.createElement("div",h({ref:n,className:c},u),e.children)}));g.displayName="PanelRoot";var S=t(32870),k=t(44606);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},w.apply(this,arguments)}function O(e){var n=(0,k.BH)((function(e){return{"dreamview-nodata-placeholder":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",fontFamily:"PingFangSC-Regular",fontSize:"14px",color:"#5D6573",backgroundColor:"#0F1014"},error:{color:e.tokens.colors.error},info:{color:e.tokens.colors.brand2},warn:{color:e.tokens.colors.warn}}}))().classes;return r.createElement("div",w({className:n["dreamview-nodata-placeholder"]},e),r.createElement("img",{style:{width:160,height:100},src:t(34534),alt:"no data"}),r.createElement("div",null,e.text))}const j=r.memo(O);var C=t(4564),E=t(955),x=t(15297),P=t(17597);function R(e){return function(n,t,r){var u=new Array(t.length).fill(!1);t.forEach((function(t,o){e.pipe((0,x.h)((function(e){if(e instanceof KeyboardEvent){var n,c=t.toLowerCase(),a=null===(n=e.key)||void 0===n?void 0:n.toLowerCase(),i=setTimeout((function(){u[o]=!1,clearTimeout(i)}),200);return r?e[r]&&a===c:a===c}return!1}))).subscribe((function(e){u[o]=!0,u.reduce((function(e,n){return e&&n}),!0)?(n(e),u=u.fill(!1)):e.preventDefault()}))}))}}function I(e){var n=e.active,t=void 0!==n&&n,u=e.keyDownHandlers,o=e.keyUpHandlers,c=(0,r.useRef)(),a=(0,r.useRef)(t);return(0,r.useEffect)((function(){a.current=t}),[t]),(0,r.useEffect)((function(){if(u)for(var e=u.length,n=function(){var e=R((0,P.R)(document,"keydown")),n=u[t];e((function(e){a.current&&(null==n||n.handler(e))}),null==n?void 0:n.keys,null==n?void 0:n.functionalKey)},t=0;t<e;t+=1)n();if(o)for(var r=o.length,c=function(){var e=R((0,P.R)(document,"keyup")),n=o[i];e((function(e){a.current&&(null==n||n.handler(e))}),null==n?void 0:n.keys,null==n?void 0:n.functionalKey)},i=0;i<r;i+=1)c()}),[u,o]),r.createElement("div",{ref:c,style:{display:"none"}})}var D=t(89617),A=t(9804);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function F(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function H(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){var r,u,o;r=e,u=n,o=t[n],(u=function(e){var n=function(e,n){if("object"!==z(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!==z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===z(n)?n:String(n)}(u))in r?Object.defineProperty(r,u,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[u]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function T(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,u,o,c,a=[],i=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);i=!0);}catch(e){l=!0,u=e}finally{try{if(!i&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw u}}return a}}(e,n)||N(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){if(e){if("string"==typeof e)return K(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?K(e,n):void 0}}function K(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function U(e){var n=e.PanelComponent,t=e.panelId,m=e.placeHolder,v=e.subscribeInfo,y=e.panelMetaData;function p(e){var p=(0,d.Z)(),h=p.isMainConnected,k=p.streamApi,w=p.metadata,O=(0,s.j)().panelCatalog,x=(0,r.useContext)(o.DF).mosaicActions,P=(0,r.useContext)(o.Jy).mosaicWindowActions,R=T((0,C.R)(),2),z=R[0],M=R[1],K=(0,i.$G)("panels").t,U=T((0,r.useState)(y),2),W=U[0],Z=U[1],L=(0,A.x)(),B=L.enterFullScreen,Q=L.exitFullScreen,$=L.fullScreenFnObj,G=T((0,r.useState)(!1),2),J=G[0],q=G[1],V=T((0,r.useState)(!1),2),X=V[0],Y=V[1],_=T((0,r.useState)({}),2),ee=_[0],ne=(_[1],(0,r.useRef)([])),te=(0,r.useRef)([]),re=(0,r.useRef)(),ue=(0,r.useRef)(),oe=(0,r.useRef)([]),ce=T((0,r.useState)([{keys:["escape"],handler:function(e){$&&null!=$&&$.exitFullScreen&&(null==$||$.exitFullScreen())}}]),2),ae=ce[0],ie=ce[1],le=T((0,r.useState)([]),2),se=le[0],fe=le[1],be=function(e){var n=(0,S.zk)().customizeSubs,t=(0,r.useRef)(),u=(0,r.useCallback)((function(e){t.current&&t.current.publish(e)}),[]);return(0,r.useEffect)((function(){t.current=n.getCustomizeEvent("channel:update:".concat(e))}),[e]),u}(t),de=(0,r.useMemo)((function(){return O.get(t)}),[t,O]),me=(0,r.useMemo)((function(){var e,n;return null!==(e=null==z||null===(n=z.selectedPanelIds)||void 0===n?void 0:n.has(t))&&void 0!==e&&e}),[z]),ve=(0,r.useMemo)((function(){return function(e){re.current=e}}),[]),ye=(0,r.useMemo)((function(){return u.Z.getInstance(t)}),[t]),pe=(0,c.NB)({onResize:function(e,n){ue.current&&ue.current(e,n),oe.current.forEach((function(t){try{t(e,n)}catch(e){console.log(e)}}))}}).ref,he=(0,r.useCallback)((function(e){ue.current=e,oe.current.push(e)}),[]),ge=(0,r.useCallback)((function(e){var n=x.getRoot(),t=P.getPath(),r=(0,f.r9)(null==de?void 0:de.type);x.replaceWith(t,{direction:e,second:r,first:(0,o.Lf)(n,t)})}),[P,x,null==de?void 0:de.type]),Se=(0,r.useCallback)((function(){var e=P.getPath();x.remove(e)}),[x,P]),ke=(0,r.useCallback)((function(){return function(e){Z(H(H({},e),{},{panelId:t}))}}),[t]),we=(0,r.useCallback)((function(e){me||M((0,E.x)(t))}),[me,M]),Oe=(0,r.useCallback)((function(e){X||!e||(0,a.isEmpty)(e)||Y(!0)}),[X]),je=(0,r.useCallback)((function(e){var n;return null!=e&&e.needChannel?null!=e&&e.name&&null!=e&&e.channel&&(n="default"===(null==e?void 0:e.channel)?k.subscribeToDataWithChannelFuzzy(null==e?void 0:e.name):k.subscribeToDataWithChannel(null==e?void 0:e.name,null==e?void 0:e.channel)):n=k.subscribeToData(null==e?void 0:e.name),n}),[k]),Ce=(0,r.useCallback)((function(e){}),[]),Ee=(0,r.useCallback)((function(e){if(h){var n=ne.current,t=n.findIndex((function(n){return n.name===e.name}));if(-1===t){var r=je(e);if(r){var u=r.subscribe((function(n){var t,r;Oe(n),re.current&&!(0,a.isEmpty)(re.current)&&(null!==(t=null===(r=re.current[e.name])||void 0===r?void 0:r.consumer)&&void 0!==t?t:Ce)(n)}));n.push({name:e.name,connectedSubject:r}),te.current.push({name:e.name,subscription:u})}}else{var o=te.current.findIndex((function(n){return n.name===e.name}));te.current[o].subscription.unsubscribe();var c=je(e);if(c){var i=c.subscribe((function(n){var t,r;Oe(n),re.current&&!(0,a.isEmpty)(re.current)&&(null!==(t=null===(r=re.current[e.name])||void 0===r?void 0:r.consumer)&&void 0!==t?t:Ce)(n)}));n[t]={name:e.name,connectedSubject:c},te.current[o]={name:e.name,subscription:i}}}}}),[h]),xe=(0,r.useCallback)((function(e){if(-1!==ne.current.findIndex((function(n){return n.name===e}))){var n=te.current.findIndex((function(n){return n.name===e}));te.current[n].subscription.unsubscribe(),te.current=te.current.filter((function(n){return n.name!==e})),ne.current=ne.current.filter((function(n){return n.name!==e}))}}),[h]),Pe=(0,r.useCallback)((function(e){ie((function(n){return[].concat(F(n),F(e))}))}),[]),Re=(0,r.useCallback)((function(e){fe((function(n){return[].concat(F(n),F(e))}))}),[]),Ie=(0,r.useCallback)((function(e){D.a.addHook(t,e)}),[]),De=(0,r.useMemo)((function(){return!(!v||J&&X)}),[J,X]),Ae=(0,r.useMemo)((function(){return m||r.createElement(j,{style:{display:De?"flex":"none"},text:K("noMessages")})}),[De]);(0,r.useEffect)((function(){if(!h||w.length<=0)return b.ZT;if(v){for(var e=null==v?void 0:v.length,n=function(){var e=v[t],n=null==e?void 0:e.name;if(!w.find((function(e){return e.dataName===n})))return 1;var r=je(e);r&&ne.current.push({name:n,connectedSubject:r})},t=0;t<e;t+=1)n();J||q(!0);var r,u=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=N(e))){t&&(e=t);var r=0,u=function(){};return{s:u,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(a)throw o}}}}(ne.current);try{var o=function(){var e=r.value,n=e.connectedSubject.subscribe((function(n){var t;Oe(n),re.current&&!(0,a.isEmpty)(re.current)&&(null!==(t=re.current[e.name].consumer)&&void 0!==t?t:Ce)(n)}));te.current.push({name:e.name,subscription:n})};for(u.s();!(r=u.n()).done;)o()}catch(e){u.e(e)}finally{u.f()}}return function(){te.current.forEach((function(e){e.subscription.unsubscribe()}))}}),[w,h]),function(e,n){var t=(0,S.zk)().customizeSubs,u=(0,r.useRef)();(0,r.useEffect)((function(){u.current=t.getCustomizeEvent("channel:notify:".concat(e)),u.current&&u.current.subscribe(n)}),[n]),(0,r.useEffect)((function(){return function(){u.current&&u.current.removeSubscribe()}}),[]),u.current}(t,Ee),function(e,n){var t=(0,S.zk)().customizeSubs,u=(0,r.useRef)();(0,r.useEffect)((function(){u.current=t.getCustomizeEvent("channel:update:".concat(e)),u.current&&u.current.subscribe(n)}),[n]),(0,r.useEffect)((function(){return function(){u.current&&u.current.removeSubscribe()}}),[]),u.current}(t,Ee);var ze=(0,r.useMemo)((function(){return{display:De?"none":"block"}}),[De]),Fe=(0,r.useMemo)((function(){return{panelId:t,initSubscription:ve,logger:ye,metaData:W,splitPanel:ge,closePanel:Se,updateMetaData:ke,enterFullScreen:B,exitFullScreen:Q,onPanelResize:he,data:ee,addChannel:Ee,updateChannel:be,closeSubcription:xe,setKeyDownHandlers:Pe,setKeyUpHandlers:Re,registerFullScreenHooks:Ie}}),[ye,be,ve,W,ge,Se,ke,B,Q,he,ee,Ee,xe,Pe,Re,Ie]);return r.createElement(l.Q.Provider,{value:Fe},r.createElement(I,{active:me,keyDownHandlers:ae,keyUpHandlers:se}),r.createElement(g,{id:t,style:ze,onClick:we,ref:pe},r.createElement(n,e)),Ae)}return Object.assign(r.memo(p),{displayName:n.displayName||n.name})}},52007:(e,n,t)=>{t.d(n,{Q:()=>u,R:()=>o});var r=t(21902),u=(0,r.createContext)(void 0);function o(){return(0,r.useContext)(u)}},34534:(e,n,t)=>{e.exports=t.p+"assets/3acc318f286448bee7dc.png"}}]);