"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[629],{2629:(e,n,t)=>{t.d(n,{Z:()=>F});var r=t(21902),u=t(79433),o=t(25625),c=t(57795),a=t(4022),i=t(54067),l=t(52007),s=t(93695),f=t(43975),b=t(93793),d=t(16125),v=t(33638),m=t(36721),p=t(43472),y=t.n(p),h=["className"];function g(){return g=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},g.apply(this,arguments)}var S=(0,r.forwardRef)((function(e,n){var t=e.className,u=function(e,n){if(null==e)return{};var t,r,u=function(e,n){if(null==e)return{};var t,r,u={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(u[t]=e[t]);return u}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(u[t]=e[t])}return u}(e,h),o=(0,m.k)("panel-root"),c=y()(o,t);return r.createElement("div",g({ref:n,className:c},u),e.children)}));S.displayName="PanelRoot";var O=t(32870),k=t(44606);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},w.apply(this,arguments)}function j(e){var n=(0,k.BH)((function(e){return{"dreamview-nodata-placeholder":{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",fontFamily:"PingFangSC-Regular",fontSize:"14px",color:"#5D6573",backgroundColor:"#0F1014"},error:{color:e.tokens.colors.error},info:{color:e.tokens.colors.brand2},warn:{color:e.tokens.colors.warn}}}))().classes;return r.createElement("div",w({className:n["dreamview-nodata-placeholder"]},e),r.createElement("img",{style:{width:160,height:100},src:t(34534),alt:"no data"}),r.createElement("div",null,e.text))}var C=t(4564),E=t(955),P=t(15297),x=t(17597);function R(e){return function(n,t,r){var u=new Array(t.length).fill(!1);t.forEach((function(t,o){e.pipe((0,P.h)((function(e){if(e instanceof KeyboardEvent){var n,c=t.toLowerCase(),a=null===(n=e.key)||void 0===n?void 0:n.toLowerCase(),i=setTimeout((function(){u[o]=!1,clearTimeout(i)}),200);return r?e[r]&&a===c:a===c}return!1}))).subscribe((function(e){u[o]=!0,u.reduce((function(e,n){return e&&n}),!0)?(n(e),u=u.fill(!1)):e.preventDefault()}))}))}}function D(e){var n=e.active,t=void 0!==n&&n,u=e.keyDownHandlers,o=e.keyUpHandlers,c=(0,r.useRef)(),a=(0,r.useRef)(t);return(0,r.useEffect)((function(){a.current=t}),[t]),(0,r.useEffect)((function(){if(u)for(var e=u.length,n=function(){var e=R((0,x.R)(document,"keydown")),n=u[t];e((function(e){a.current&&(null==n||n.handler(e))}),null==n?void 0:n.keys,null==n?void 0:n.functionalKey)},t=0;t<e;t+=1)n();if(o)for(var r=o.length,c=function(){var e=R((0,x.R)(document,"keyup")),n=o[i];e((function(e){a.current&&(null==n||n.handler(e))}),null==n?void 0:n.keys,null==n?void 0:n.functionalKey)},i=0;i<r;i+=1)c()}),[u,o]),r.createElement("div",{ref:c,style:{display:"none"}})}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?z(Object(t),!0).forEach((function(n){var r,u,o;r=e,u=n,o=t[n],(u=function(e){var n=function(e,n){if("object"!==I(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===I(n)?n:String(n)}(u))in r?Object.defineProperty(r,u,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[u]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function M(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,u,o,c,a=[],i=!0,l=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=o.call(t)).done)&&(a.push(r.value),a.length!==n);i=!0);}catch(e){l=!0,u=e}finally{try{if(!i&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw u}}return a}}(e,n)||N(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){if(e){if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function F(e,n,t,m){function p(p){var y=(0,d.Z)(),h=y.isMainConnected,g=y.streamApi,k=y.metadata,w=(0,s.j)().panelCatalog,P=(0,r.useContext)(o.DF).mosaicActions,x=(0,r.useContext)(o.Jy).mosaicWindowActions,R=M((0,C.R)(),2),I=R[0],z=R[1],T=(0,i.$G)("panels").t,F=M((0,r.useState)(m),2),H=F[0],K=F[1],Z=M((0,v.Z)(n),2),U=Z[0],W=Z[1],L=M((0,r.useState)(!1),2),B=L[0],Q=L[1],$=M((0,r.useState)(!1),2),G=$[0],J=$[1],q=M((0,r.useState)({}),2),V=q[0],X=(q[1],(0,r.useRef)([])),Y=(0,r.useRef)([]),_=(0,r.useRef)(),ee=(0,r.useRef)(),ne=M((0,r.useState)(),2),te=ne[0],re=ne[1],ue=M((0,r.useState)(),2),oe=ue[0],ce=ue[1],ae=function(e){var n=(0,O.zk)().customizeSubs,t=(0,r.useRef)(),u=(0,r.useCallback)((function(e){t.current&&t.current.publish(e)}),[]);return(0,r.useEffect)((function(){t.current=n.getCustomizeEvent("channel:update:".concat(e))}),[e]),u}(n),ie=(0,r.useMemo)((function(){return w.get(n)}),[n,w]),le=(0,r.useMemo)((function(){var e,t;return null!==(e=null==I||null===(t=I.selectedPanelIds)||void 0===t?void 0:t.has(n))&&void 0!==e&&e}),[I]),se=(0,r.useMemo)((function(){return function(e){_.current=e}}),[]),fe=(0,r.useMemo)((function(){return u.Z.getInstance(n)}),[n]),be=(0,c.NB)({onResize:function(e,n){ee.current&&ee.current(e,n)}}).ref,de=(0,r.useCallback)((function(e){ee.current=e}),[]),ve=(0,r.useCallback)((function(e){var n=P.getRoot(),t=x.getPath(),r=(0,f.r9)(null==ie?void 0:ie.type);P.replaceWith(t,{direction:e,second:r,first:(0,o.Lf)(n,t)})}),[x,P,null==ie?void 0:ie.type]),me=(0,r.useCallback)((function(){var e=x.getPath();P.remove(e)}),[P,x]),pe=(0,r.useCallback)((function(){return function(e){K(A(A({},e),{},{panelId:n}))}}),[n]),ye=(0,r.useCallback)((function(e){le||z((0,E.x)(n))}),[le,z]),he=(0,r.useCallback)((function(e){G||!e||(0,a.isEmpty)(e)||J(!0)}),[G]),ge=(0,r.useCallback)((function(e){var n;return null!=e&&e.needChannel?null!=e&&e.name&&null!=e&&e.channel&&(n="default"===(null==e?void 0:e.channel)?g.subscribeToDataWithChannelFuzzy(null==e?void 0:e.name):g.subscribeToDataWithChannel(null==e?void 0:e.name,null==e?void 0:e.channel)):n=g.subscribeToData(null==e?void 0:e.name),n}),[g]),Se=(0,r.useCallback)((function(e){}),[]),Oe=(0,r.useCallback)((function(e){if(h){var n=X.current,t=n.findIndex((function(n){return n.name===e.name}));if(-1===t){var r=ge(e);if(r){var u=r.subscribe((function(n){var t,r;he(n),_.current&&!(0,a.isEmpty)(_.current)&&(null!==(t=null===(r=_.current[e.name])||void 0===r?void 0:r.consumer)&&void 0!==t?t:Se)(n)}));n.push({name:e.name,connectedSubject:r}),Y.current.push({name:e.name,subscription:u})}}else{var o=Y.current.findIndex((function(n){return n.name===e.name}));Y.current[o].subscription.unsubscribe();var c=ge(e);if(c){var i=c.subscribe((function(n){var t,r;he(n),_.current&&!(0,a.isEmpty)(_.current)&&(null!==(t=null===(r=_.current[e.name])||void 0===r?void 0:r.consumer)&&void 0!==t?t:Se)(n)}));n[t]={name:e.name,connectedSubject:c},Y.current[o]={name:e.name,subscription:i}}}}}),[h]),ke=(0,r.useCallback)((function(e){if(-1!==X.current.findIndex((function(n){return n.name===e}))){var n=Y.current.findIndex((function(n){return n.name===e}));Y.current[n].subscription.unsubscribe(),Y.current=Y.current.filter((function(n){return n.name!==e})),X.current=X.current.filter((function(n){return n.name!==e}))}}),[h]),we=(0,r.useCallback)((function(e){re(e)}),[]),je=(0,r.useCallback)((function(e){ce(e)}),[]),Ce=(0,r.useMemo)((function(){return r.createElement(j,{style:{display:B&&G?"none":"flex"},text:T("noMessages")})}),[B,G]);(0,r.useEffect)((function(){if(!h||k.length<=0)return b.ZT;if(t){for(var e=null==t?void 0:t.length,n=function(){var e=t[r],n=null==e?void 0:e.name;if(!k.find((function(e){return e.dataName===n})))return 1;var u=ge(e);u&&X.current.push({name:n,connectedSubject:u})},r=0;r<e;r+=1)n();B||Q(!0);var u,o=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=N(e))){t&&(e=t);var r=0,u=function(){};return{s:u,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==t.return||t.return()}finally{if(a)throw o}}}}(X.current);try{var c=function(){var e=u.value,n=e.connectedSubject.subscribe((function(n){var t;he(n),_.current&&!(0,a.isEmpty)(_.current)&&(null!==(t=_.current[e.name].consumer)&&void 0!==t?t:Se)(n)}));Y.current.push({name:e.name,subscription:n})};for(o.s();!(u=o.n()).done;)c()}catch(e){o.e(e)}finally{o.f()}}return function(){Y.current.forEach((function(e){e.subscription.unsubscribe()}))}}),[h]),function(e,n){var t=(0,O.zk)().customizeSubs,u=(0,r.useRef)();(0,r.useEffect)((function(){u.current=t.getCustomizeEvent("channel:notify:".concat(e)),u.current&&u.current.subscribe(n)}),[n]),(0,r.useEffect)((function(){return function(){u.current&&u.current.removeSubscribe()}}),[]),u.current}(n,Oe),function(e,n){var t=(0,O.zk)().customizeSubs,u=(0,r.useRef)();(0,r.useEffect)((function(){u.current=t.getCustomizeEvent("channel:update:".concat(e)),u.current&&u.current.subscribe(n)}),[n]),(0,r.useEffect)((function(){return function(){u.current&&u.current.removeSubscribe()}}),[]),u.current}(n,Oe);var Ee=(0,r.useMemo)((function(){return{display:B&&G?"block":"none"}}),[B,G]),Pe=(0,r.useMemo)((function(){return{panelId:n,initSubscription:se,logger:fe,metaData:H,splitPanel:ve,closePanel:me,updateMetaData:pe,enterFullScreen:U,exitFullScreen:W,onPanelResize:de,data:V,addChannel:Oe,updateChannel:ae,closeSubcription:ke,setKeyDownHandlers:we,setKeyUpHandlers:je}}),[fe,ae,se,H,ve,me,pe,U,W,de,V,Oe,ke,we,je]);return r.createElement(l.Q.Provider,{value:Pe},r.createElement(D,{active:le,keyDownHandlers:te,keyUpHandlers:oe}),r.createElement(S,{style:Ee,onClick:ye,ref:be},r.createElement(e,p)),Ce)}return Object.assign(r.memo(p),{displayName:e.displayName||e.name})}},52007:(e,n,t)=>{t.d(n,{Q:()=>u,R:()=>o});var r=t(21902),u=(0,r.createContext)(void 0);function o(){return(0,r.useContext)(u)}},34534:(e,n,t)=>{e.exports=t.p+"assets/3acc318f286448bee7dc.png"}}]);
//# sourceMappingURL=629.bc9d469f8f7a9d7c3d0f.js.map