{"version":3,"file":"14.34979eb80e9acd940ae4.js","mappings":"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","sources":["webpack:///../../../dreamview-core/src/components/panels/ModuleDelay/index.tsx","webpack:///../../../dreamview-core/src/components/panels/ModuleDelay/useStyle.ts","webpack:///../../../dreamview-core/src/util/misc.ts","webpack:///../../../../node_modules/react-resize-detector/build/index.esm.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport type { apollo } from '@dreamview/dreamview';\nimport { millisecondsToTime } from '../../../util/misc';\nimport useStyle from './useStyle';\nimport { StreamDataNames } from '../../../services/api/types';\nimport { usePanelContext } from '../base/store/PanelStore';\nimport Panel from '../base/Panel';\nimport CustomScroll from '../../CustomScroll';\n\ntype ISimulationWorld = apollo.dreamview.ISimulationWorld;\n\ninterface IModuleDelayMsg {\n    name: string;\n    delay: number | string;\n}\n\nfunction InternalModuleDelay() {\n    const panelContext = usePanelContext();\n    const { initSubscription, logger, data: subcribedData } = panelContext;\n    const { classes, cx } = useStyle();\n\n    const [delay, setDelay] = useState<Record<string, number>>({});\n    const [data, setData] = useState<ISimulationWorld>();\n\n    useEffect(() => {\n        initSubscription({\n            [StreamDataNames.SIM_WORLD]: {\n                consumer: (simData) => {\n                    setData(simData);\n                },\n            },\n        });\n    }, []);\n\n    const delayList = useMemo(() => {\n        if (delay) {\n            return Object.keys(delay)\n                .sort()\n                .map((key) => {\n                    const module = delay[key];\n                    const warning = Number(delay[key]) > 2000 && key !== 'TrafficLight';\n                    return {\n                        name: key,\n                        delay: delay[key],\n                        fronDelay: (delay[key] as any) < 0 ? '-' : millisecondsToTime(delay[key] as number),\n                        frotWarning: warning,\n                    };\n                });\n        }\n\n        return [];\n    }, [delay]);\n\n    useEffect(() => {\n        setDelay(data?.delay);\n    }, [data]);\n\n    return (\n        <CustomScroll className={classes['panel-module-delay-root']}>\n            <ul className={classes['panel-module-delay-scroll']}>\n                {delayList.map((item, index) => (\n                    <li className={classes['panel-module-delay-item']} key={`${index + 1}`}>\n                        <span className={classes.name}>{item.name}</span>\n                        <span className={cx(classes.time, { [classes.error]: item.frotWarning })}>\n                            {item.fronDelay}\n                        </span>\n                    </li>\n                ))}\n            </ul>\n        </CustomScroll>\n    );\n}\n\nexport default function ModuleDelay(props: any) {\n    const Component = useMemo(\n        () => Panel(InternalModuleDelay, props.panelId, [{ name: StreamDataNames.SIM_WORLD, needChannel: false }]),\n        [],\n    );\n\n    return <Component {...props} />;\n}\n\nInternalModuleDelay.displayName = 'InternalModuleDelay';\n","import { useMakeStyle } from '@dreamview/dreamview-theme';\n\nexport default function useStyle() {\n    const hoc = useMakeStyle((theme) => ({\n        'panel-module-delay-root': {\n            padding: theme.tokens.padding.speace2,\n            height: '100%',\n            width: '100%',\n        },\n        'panel-module-delay-scroll': {\n            minWidth: '244px',\n        },\n        'panel-module-delay-item': {\n            display: 'flex',\n            ...theme.tokens.typography.content,\n            color: theme.tokens.font.color.main,\n            marginBottom: '10px',\n            '&:last-of-type': {\n                marginBottom: 0,\n            },\n        },\n        name: {\n            whiteSpace: 'nowrap',\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n            flex: 1,\n            marginRight: theme.tokens.margin.speace,\n        },\n        time: {\n            whiteSpace: 'nowrap',\n        },\n        error: {\n            color: theme.tokens.font.color.error,\n        },\n    }));\n    return hoc();\n}\n","/**\n * 补充0至指定长度\n * @param val\n * @param length\n * @returns\n * fill0(1, 3) => 001\n * fill0(21, 3) => 021\n */\nexport function fill0(val: number | string, length = 2): string {\n    const number = Number(val);\n    const max = 10 ** (length - 1);\n    if (number > max) {\n        return String(number);\n    }\n    const prefFix = '0'.repeat(length - String(number).length);\n    if (typeof number !== 'number') {\n        throw new Error('fill0 recived an invidate value');\n    }\n    return `${prefFix}${number}`;\n}\n/**\n *\n * @param timestampMs\n * @param showMilliseconds\n * @returns 12:33:31:054 or 12:33:31\n */\nexport function timestampMsToTimeString(timestampMs: number | string, showMilliseconds = false) {\n    const date = new Date(timestampMs);\n    const hours = fill0(date.getHours());\n    const minutes = fill0(date.getMinutes());\n    const seconds = fill0(date.getSeconds());\n    const milliseconds = fill0(date.getMilliseconds(), 3);\n\n    let timeString = `${hours}:${minutes}:${seconds}`;\n\n    if (showMilliseconds) {\n        timeString += `:${milliseconds}`;\n    }\n\n    return timeString;\n}\n\nconst MILLISECONDS_IN_A_SECOND = 1000;\nconst MILLISECONDS_IN_A_MINUTE = 1000 * 60;\n\n/**\n *\n * @param duration\n * @returns 00:00.000\n */\nexport function millisecondsToTime(duration: number) {\n    const milliseconds = fill0(Math.floor(duration % 1000), 3);\n    const seconds = fill0(Math.floor((duration / MILLISECONDS_IN_A_SECOND) % 60));\n    const minutes = fill0(Math.floor(duration / MILLISECONDS_IN_A_MINUTE));\n\n    return `${minutes}:${seconds}.${milliseconds}`;\n}\n","import React,{cloneElement,isValidElement,createRef,PureComponent,Component,forwardRef,useRef,useState,useCallback,useEffect}from'react';import {findDOMNode}from'react-dom';import debounce from'lodash/debounce';import throttle from'lodash/throttle';/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}var patchResizeCallback = function (resizeCallback, refreshMode, refreshRate, refreshOptions) {\n    switch (refreshMode) {\n        case 'debounce':\n            return debounce(resizeCallback, refreshRate, refreshOptions);\n        case 'throttle':\n            return throttle(resizeCallback, refreshRate, refreshOptions);\n        default:\n            return resizeCallback;\n    }\n};\nvar isFunction = function (fn) { return typeof fn === 'function'; };\nvar isSSR = function () { return typeof window === 'undefined'; };\nvar isDOMElement = function (element) {\n    return element instanceof Element || element instanceof HTMLDocument;\n};var ResizeDetector = /** @class */ (function (_super) {\n    __extends(ResizeDetector, _super);\n    function ResizeDetector(props) {\n        var _this = _super.call(this, props) || this;\n        _this.cancelHandler = function () {\n            if (_this.resizeHandler && _this.resizeHandler.cancel) {\n                // cancel debounced handler\n                _this.resizeHandler.cancel();\n                _this.resizeHandler = null;\n            }\n        };\n        _this.attachObserver = function () {\n            var _a = _this.props, targetRef = _a.targetRef, observerOptions = _a.observerOptions;\n            if (isSSR()) {\n                return;\n            }\n            if (targetRef && targetRef.current) {\n                _this.targetRef.current = targetRef.current;\n            }\n            var element = _this.getElement();\n            if (!element) {\n                // can't find element to observe\n                return;\n            }\n            if (_this.observableElement && _this.observableElement === element) {\n                // element is already observed\n                return;\n            }\n            _this.observableElement = element;\n            _this.resizeObserver.observe(element, observerOptions);\n        };\n        _this.getElement = function () {\n            var _a = _this.props, querySelector = _a.querySelector, targetDomEl = _a.targetDomEl;\n            if (isSSR())\n                return null;\n            // in case we pass a querySelector\n            if (querySelector)\n                return document.querySelector(querySelector);\n            // in case we pass a DOM element\n            if (targetDomEl && isDOMElement(targetDomEl))\n                return targetDomEl;\n            // in case we pass a React ref using React.createRef()\n            if (_this.targetRef && isDOMElement(_this.targetRef.current))\n                return _this.targetRef.current;\n            // the worse case when we don't receive any information from the parent and the library doesn't add any wrappers\n            // we have to use a deprecated `findDOMNode` method in order to find a DOM element to attach to\n            var currentElement = findDOMNode(_this);\n            if (!currentElement)\n                return null;\n            var renderType = _this.getRenderType();\n            switch (renderType) {\n                case 'renderProp':\n                    return currentElement;\n                case 'childFunction':\n                    return currentElement;\n                case 'child':\n                    return currentElement;\n                case 'childArray':\n                    return currentElement;\n                default:\n                    return currentElement.parentElement;\n            }\n        };\n        _this.createResizeHandler = function (entries) {\n            var _a = _this.props, _b = _a.handleWidth, handleWidth = _b === void 0 ? true : _b, _c = _a.handleHeight, handleHeight = _c === void 0 ? true : _c, onResize = _a.onResize;\n            if (!handleWidth && !handleHeight)\n                return;\n            var notifyResize = function (_a) {\n                var width = _a.width, height = _a.height;\n                if (_this.state.width === width && _this.state.height === height) {\n                    // skip if dimensions haven't changed\n                    return;\n                }\n                if ((_this.state.width === width && !handleHeight) || (_this.state.height === height && !handleWidth)) {\n                    // process `handleHeight/handleWidth` props\n                    return;\n                }\n                onResize === null || onResize === void 0 ? void 0 : onResize(width, height);\n                _this.setState({ width: width, height: height });\n            };\n            entries.forEach(function (entry) {\n                var _a = (entry && entry.contentRect) || {}, width = _a.width, height = _a.height;\n                var shouldSetSize = !_this.skipOnMount && !isSSR();\n                if (shouldSetSize) {\n                    notifyResize({ width: width, height: height });\n                }\n                _this.skipOnMount = false;\n            });\n        };\n        _this.getRenderType = function () {\n            var _a = _this.props, render = _a.render, children = _a.children;\n            if (isFunction(render)) {\n                // DEPRECATED. Use `Child Function Pattern` instead\n                return 'renderProp';\n            }\n            if (isFunction(children)) {\n                return 'childFunction';\n            }\n            if (isValidElement(children)) {\n                return 'child';\n            }\n            if (Array.isArray(children)) {\n                // DEPRECATED. Wrap children with a single parent\n                return 'childArray';\n            }\n            // DEPRECATED. Use `Child Function Pattern` instead\n            return 'parent';\n        };\n        var skipOnMount = props.skipOnMount, refreshMode = props.refreshMode, _a = props.refreshRate, refreshRate = _a === void 0 ? 1000 : _a, refreshOptions = props.refreshOptions;\n        _this.state = {\n            width: undefined,\n            height: undefined\n        };\n        _this.sizeRef = {\n            current: _this.state\n        };\n        _this.skipOnMount = skipOnMount;\n        _this.targetRef = createRef();\n        _this.observableElement = null;\n        if (isSSR()) {\n            return _this;\n        }\n        _this.resizeHandler = patchResizeCallback(_this.createResizeHandler, refreshMode, refreshRate, refreshOptions);\n        _this.resizeObserver = new window.ResizeObserver(_this.resizeHandler);\n        return _this;\n    }\n    ResizeDetector.prototype.componentDidMount = function () {\n        this.attachObserver();\n    };\n    ResizeDetector.prototype.componentDidUpdate = function () {\n        this.attachObserver();\n        this.sizeRef.current = this.state;\n    };\n    ResizeDetector.prototype.componentWillUnmount = function () {\n        if (isSSR()) {\n            return;\n        }\n        this.observableElement = null;\n        this.resizeObserver.disconnect();\n        this.cancelHandler();\n    };\n    ResizeDetector.prototype.render = function () {\n        var _a = this.props, render = _a.render, children = _a.children, _b = _a.nodeType, WrapperTag = _b === void 0 ? 'div' : _b;\n        var _c = this.state, width = _c.width, height = _c.height;\n        var childProps = { width: width, height: height, targetRef: this.targetRef };\n        var renderType = this.getRenderType();\n        switch (renderType) {\n            case 'renderProp':\n                return render === null || render === void 0 ? void 0 : render(childProps);\n            case 'childFunction': {\n                var childFunction = children;\n                return childFunction === null || childFunction === void 0 ? void 0 : childFunction(childProps);\n            }\n            case 'child': {\n                // @TODO bug prone logic\n                var child = children;\n                if (child.type && typeof child.type === 'string') {\n                    // child is a native DOM elements such as div, span etc\n                    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                    childProps.targetRef; var nativeProps = __rest(childProps, [\"targetRef\"]);\n                    return cloneElement(child, nativeProps);\n                }\n                // class or functional component otherwise\n                return cloneElement(child, childProps);\n            }\n            case 'childArray': {\n                var childArray = children;\n                return childArray.map(function (el) { return !!el && cloneElement(el, childProps); });\n            }\n            default:\n                return React.createElement(WrapperTag, null);\n        }\n    };\n    return ResizeDetector;\n}(PureComponent));function withResizeDetector(ComponentInner, options) {\n    if (options === void 0) { options = {}; }\n    var ResizeDetectorHOC = /** @class */ (function (_super) {\n        __extends(ResizeDetectorHOC, _super);\n        function ResizeDetectorHOC() {\n            var _this = _super !== null && _super.apply(this, arguments) || this;\n            _this.ref = createRef();\n            return _this;\n        }\n        ResizeDetectorHOC.prototype.render = function () {\n            var _a = this.props, forwardedRef = _a.forwardedRef, rest = __rest(_a, [\"forwardedRef\"]);\n            var targetRef = forwardedRef !== null && forwardedRef !== void 0 ? forwardedRef : this.ref;\n            return (React.createElement(ResizeDetector, __assign({}, options, { targetRef: targetRef }),\n                React.createElement(ComponentInner, __assign({ targetRef: targetRef }, rest))));\n        };\n        return ResizeDetectorHOC;\n    }(Component));\n    function forwardRefWrapper(props, ref) {\n        return React.createElement(ResizeDetectorHOC, __assign({}, props, { forwardedRef: ref }));\n    }\n    var name = ComponentInner.displayName || ComponentInner.name;\n    forwardRefWrapper.displayName = \"withResizeDetector(\".concat(name, \")\");\n    return forwardRef(forwardRefWrapper);\n}function useResizeDetector(_a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.skipOnMount, skipOnMount = _c === void 0 ? false : _c, refreshMode = _b.refreshMode, _d = _b.refreshRate, refreshRate = _d === void 0 ? 1000 : _d, refreshOptions = _b.refreshOptions, _e = _b.handleWidth, handleWidth = _e === void 0 ? true : _e, _f = _b.handleHeight, handleHeight = _f === void 0 ? true : _f, targetRef = _b.targetRef, observerOptions = _b.observerOptions, onResize = _b.onResize;\n    var skipResize = useRef(skipOnMount);\n    var _g = useState({\n        width: undefined,\n        height: undefined\n    }), size = _g[0], setSize = _g[1];\n    // we are going to use this ref to store the last element that was passed to the hook\n    var _h = useState((targetRef === null || targetRef === void 0 ? void 0 : targetRef.current) || null), refElement = _h[0], setRefElement = _h[1];\n    // if targetRef is passed, we need to update the refElement\n    // we have to use setTimeout because ref get assigned after the hook is called\n    // in the future releases we are going to remove targetRef and force users to use ref returned by the hook\n    if (targetRef) {\n        setTimeout(function () {\n            if (targetRef.current !== refElement) {\n                setRefElement(targetRef.current);\n            }\n        }, 0);\n    }\n    // this is a callback that will be called every time the ref is changed\n    // we call setState inside to trigger rerender\n    var onRefChange = useCallback(function (node) {\n        if (node !== refElement) {\n            setRefElement(node);\n        }\n    }, [refElement]);\n    // adding `current` to make it compatible with useRef shape\n    onRefChange.current = refElement;\n    useEffect(function () {\n        return function () {\n            // component is unmounted\n            // clear ref to avoid memory leaks\n            setRefElement(null);\n            onRefChange.current = null;\n        };\n    }, []);\n    var shouldSetSize = useCallback(function (prevSize, nextSize) {\n        if (prevSize.width === nextSize.width && prevSize.height === nextSize.height) {\n            // skip if dimensions haven't changed\n            return false;\n        }\n        if ((prevSize.width === nextSize.width && !handleHeight) ||\n            (prevSize.height === nextSize.height && !handleWidth)) {\n            // process `handleHeight/handleWidth` props\n            return false;\n        }\n        return true;\n    }, [handleWidth, handleHeight]);\n    var resizeCallback = useCallback(function (entries) {\n        if (!handleWidth && !handleHeight)\n            return;\n        if (skipResize.current) {\n            skipResize.current = false;\n            return;\n        }\n        entries.forEach(function (entry) {\n            var _a = (entry === null || entry === void 0 ? void 0 : entry.contentRect) || {}, width = _a.width, height = _a.height;\n            setSize(function (prevSize) {\n                if (!shouldSetSize(prevSize, { width: width, height: height }))\n                    return prevSize;\n                return { width: width, height: height };\n            });\n        });\n    }, [handleWidth, handleHeight, skipResize, shouldSetSize]);\n    var resizeHandler = useCallback(patchResizeCallback(resizeCallback, refreshMode, refreshRate, refreshOptions), [\n        resizeCallback,\n        refreshMode,\n        refreshRate,\n        refreshOptions\n    ]);\n    // on refElement change\n    useEffect(function () {\n        var resizeObserver;\n        if (refElement) {\n            resizeObserver = new window.ResizeObserver(resizeHandler);\n            resizeObserver.observe(refElement, observerOptions);\n        }\n        else {\n            if (size.width || size.height) {\n                setSize({ width: undefined, height: undefined });\n            }\n        }\n        return function () {\n            var _a, _b, _c;\n            (_a = resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.disconnect) === null || _a === void 0 ? void 0 : _a.call(resizeObserver);\n            (_c = (_b = resizeHandler).cancel) === null || _c === void 0 ? void 0 : _c.call(_b);\n        };\n    }, [resizeHandler, refElement]);\n    useEffect(function () {\n        onResize === null || onResize === void 0 ? void 0 : onResize(size.width, size.height);\n    }, [size]);\n    return __assign({ ref: onRefChange }, size);\n}export{ResizeDetector as default,useResizeDetector,withResizeDetector};//# sourceMappingURL=index.esm.js.map\n"],"names":["InternalModuleDelay","panelContext","usePanelContext","initSubscription","_useStyle","logger","data","useMakeStyle","theme","padding","tokens","speace2","height","width","minWidth","_objectSpread","display","typography","content","color","font","main","marginBottom","name","whiteSpace","overflow","textOverflow","flex","marginRight","margin","speace","time","error","hoc","classes","cx","_useState2","_slicedToArray","useState","delay","setDelay","_useState4","setData","useEffect","_defineProperty","StreamDataNames","SIM_WORLD","consumer","simData","delayList","useMemo","Object","keys","sort","map","key","warning","Number","fronDelay","millisecondsToTime","frotWarning","React","CustomScroll","className","item","index","concat","ModuleDelay","props","Component","Panel","panelId","needChannel","displayName","fill0","val","length","arguments","undefined","number","Math","pow","String","prefFix","repeat","Error","timestampMsToTimeString","timestampMs","showMilliseconds","date","Date","hours","getHours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","timeString","MILLISECONDS_IN_A_SECOND","MILLISECONDS_IN_A_MINUTE","duration","floor","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","i","n","prototype","call","apply","this","patchResizeCallback","resizeCallback","refreshMode","refreshRate","refreshOptions","isFunction","fn","isSSR","window","isDOMElement","element","Element","HTMLDocument","useResizeDetector","_a","_b","_c","skipOnMount","_d","_e","handleWidth","_f","handleHeight","targetRef","observerOptions","onResize","skipResize","useRef","_g","size","setSize","_h","current","refElement","setRefElement","setTimeout","onRefChange","useCallback","node","shouldSetSize","prevSize","nextSize","entries","forEach","entry","contentRect","resizeHandler","resizeObserver","ResizeObserver","observe","disconnect","cancel","ref","_super","ResizeDetector","_this","cancelHandler","attachObserver","getElement","observableElement","querySelector","targetDomEl","document","currentElement","findDOMNode","getRenderType","parentElement","createResizeHandler","state","setState","notifyResize","render","children","isValidElement","isArray","sizeRef","createRef","__","constructor","create","__extends","componentDidMount","componentDidUpdate","componentWillUnmount","nodeType","WrapperTag","childProps","childFunction","child","type","nativeProps","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","cloneElement","el","PureComponent"],"sourceRoot":""}